%section.contact
  = render partial: 'wizard_nav', locals: { selected: 'contact' }
  %h2<Contact Info
  - @location.email ||= current_user && current_user.email
  = form_for @location, builder: FormBuilder do |f|
    - if @location.errors.any?
      .panel
        %ul
          - @location.errors.full_messages.each do |msg|
            %li<=msg
    = f.hidden_field_tag 'done', '1'
    .row
      .columns.six
        = f.text_field :street_address
        = f.text_field :city
        = f.select :country, [ ['Canada', 'CA'], ['United States', 'US']]
        = f.select :province, States::CANADIAN_PROVINCES
        = f.phone_number :phone
        = f.url :fb_url, label: 'Facebok URL'
        = f.text_field :twitter_url, label: 'Twitter URL'
        = f.email :email
      .columns.six
        %span.question<Can we display this contact info on U-Map?
        = f.radio_option :public_contact, true, label: 'Yes! Please share these details publicly'
        = f.radio_option :public_contact, false, label: 'No, I prefer that people contact me through Young Agrarians In-Mail (account required.)'
        = f.date :show_until
        = f.submit( 'Previous' )
        = f.submit( 'Submit' )
= javascript_include_tag '//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js'
:javascript
  var states = #{States::AMERICAN_STATES.to_json};
  var provinces = #{States::CANADIAN_PROVINCES.to_json};
  $('#location_country').change( function(e)
  {
    $('#location_province').get(0).options.length = 0;
    var o = $('#location_province').get(0).options;
    if( $( e.currentTarget ).val() == 'US' )
    {
      for( var i = 0; i < states.length; i++ )
      {
        o[o.length] = new Option( states[i][0], states[i][1] );
      }
    }
    else
    {
      for( var i = 0; i < provinces.length; i++ )
      {
        o[o.length] = new Option( provinces[i][0], provinces[i][1] );
      }
    }

  });
